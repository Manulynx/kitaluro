{% extends 'base.html' %}
{% load static %}

{% block title %}{% block productos_title %}Productos{% endblock %} | Kitaluro{% endblock %}

{% block content %}
<div class="productos-container">
    <header class="productos-header">
        <h2 class="productos-title">{% block page_title %}Nuestros Productos{% endblock %}</h2>
        <div class="productos-filters">
            {% block productos_filters %}
            <!-- Filtros y barra de búsqueda -->
            <div class="search-bar">
                <input type="text" placeholder="Buscar productos..." class="search-input">
                <button type="button" class="search-btn">Buscar</button>
            </div>
            {% endblock %}
        </div>
    </header>

    <div class="productos-layout">
        <button class="sidebar-toggle mobile-only" aria-label="Filtros">
            <span>Filtros</span>
            <svg width="16" height="16" fill="currentColor">
                <path d="M3 7h10l-3-3m0 6l3-3"/>
            </svg>
        </button>
        <aside class="productos-sidebar" id="productos-sidebar">
            {% block productos_sidebar %}
            <!-- Sidebar con categorías, filtros adicionales, etc. -->
            <div class="sidebar-section">
                <h3>Categorías</h3>
                <ul class="category-list">
                    <li><a href="#" class="category-item active">Todas</a></li>
                    <li><a href="#" class="category-item">Electrónicos</a></li>
                    <li><a href="#" class="category-item">Ropa</a></li>
                    <li><a href="#" class="category-item">Hogar</a></li>
                    <li><a href="#" class="category-item">Deportes</a></li>
                </ul>
            </div>
            {% endblock %}
        </aside>

        <main class="productos-content">
            {% block productos_content %}
            <div class="productos-grid">
                <!-- Los productos se mostrarán aquí dinámicamente -->
                {% comment %}
                Ejemplo de estructura para cuando se agreguen productos reales:
                {% for producto in productos %}
                <div class="card">
                    <div class="card-image">
                        {% if producto.imagen %}
                            <img src="{{ producto.imagen.url }}" alt="{{ producto.nombre }}">
                        {% endif %}
                    </div>
                    <div class="card-body">
                        <h4 class="card-title">{{ producto.nombre }}</h4>
                        <p class="card-text">{{ producto.descripcion }}</p>
                        <div class="card-price">${{ producto.precio }}</div>
                        <a href="{% url 'productos:detalle' producto.id %}" class="btn btn-primary">Ver Detalles</a>
                    </div>
                </div>
                {% empty %}
                <div class="text-center">
                    <p>No hay productos disponibles en este momento.</p>
                </div>
                {% endfor %}
                {% endcomment %}
                
                <div class="text-center p-2xl">
                    <h3>No hay productos disponibles</h3>
                    <p class="text-secondary">Los productos se mostrarán aquí cuando estén disponibles.</p>
                </div>
            </div>

            <!-- Paginación -->
            {% block productos_pagination %}
            <div class="pagination-container">
                <nav class="pagination">
                    <a href="#" class="page-link disabled">« Anterior</a>
                    <a href="#" class="page-link active">1</a>
                    <a href="#" class="page-link">2</a>
                    <a href="#" class="page-link">3</a>
                    <a href="#" class="page-link">Siguiente »</a>
                </nav>
            </div>
            {% endblock %}
            {% endblock %}
        </main>
    </div>
</div>

<script>
    // Sidebar móvil para productos
    document.addEventListener('DOMContentLoaded', function() {
        const sidebarToggle = document.querySelector('.sidebar-toggle');
        const sidebar = document.querySelector('#productos-sidebar');

        if (sidebarToggle && sidebar) {
            sidebarToggle.addEventListener('click', function() {
                sidebar.classList.toggle('sidebar-open');
                const isOpen = sidebar.classList.contains('sidebar-open');
                sidebarToggle.innerHTML = isOpen ? 
                    '<span>Ocultar Filtros</span><svg width="16" height="16" fill="currentColor"><path d="M3 7h10l3 3m0-6l-3-3"/></svg>' :
                    '<span>Filtros</span><svg width="16" height="16" fill="currentColor"><path d="M3 7h10l-3-3m0 6l3-3"/></svg>';
            });
        }
    });
</script>

{% endblock %}