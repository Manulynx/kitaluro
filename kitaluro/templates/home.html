{% extends 'base.html' %} 
{% load static %} 
{% block title %}Kitaluro | The Future of Home{% endblock %} 
{% block content %}

<!-- ========================================================================== -->
<!-- HERO BANNER - VIDEO COMPLETO SIN RECORTE -->
<!-- ========================================================================== -->
<section class="lux-hero-banner">
  <div class="lux-hero-media reveal">
    <video
      id="heroVideo"
      class="lux-hero-video"
      autoplay
      muted
      loop
      playsinline
      preload="none"
      poster="{% static 'img/hero-poster.jpg' %}"
      aria-label="Video promocional de la colecci√≥n Kitaluro"
    >
      <source src="{% static 'video/videowebm.webm' %}" type="video/webm" />
      <source src="{% static 'video/video.mp4' %}" type="video/mp4" />
      <img src="{% static 'img/hero-poster.jpg' %}" alt="Colecci√≥n Kitaluro" />
    </video>

    <!-- Capa de texto solo para escritorio/tablet -->
    <div class="lux-hero-overlay">
      <div class="lux-hero-content">
        <p class="lux-hero-kicker">Colecci√≥n 2025</p>
        <h1 class="lux-hero-title">KITALURO</h1>
        <p class="lux-hero-subtitle">Tu aliado en protecci√≥n y tecnolog√≠a</p>
        <div class="lux-hero-actions">
          <a href="{% url 'productos:index' %}" class="btn-crimson"
            >Explorar Colecci√≥n</a
          >
        </div>
      </div>
    </div>
  </div>

  <!-- Bloque de texto independiente solo para m√≥viles -->
  <div class="lux-hero-mobile-copy reveal">
    <p class="lux-hero-mobile-kicker">Colecci√≥n 2025</p>
    <h1 class="lux-hero-mobile-title">KITALURO</h1>
    <p class="lux-hero-mobile-subtitle">Redefiniendo el lujo.</p>
    <div class="lux-hero-mobile-actions">
      <a href="{% url 'productos:index' %}" class="btn-crimson"
        >Explorar Colecci√≥n</a
      >
    </div>
  </div>
</section>

{% include 'includes/brand_banner.html' %}

<section
  id="products"
  class="py-12 sm:py-16 md:py-20 lg:py-24 px-4 sm:px-6 lg:px-8 bg-gray-50 dark:bg-neutral-900"
>
  <div class="max-w-7xl mx-auto">
    <div class="text-center mb-8 sm:mb-12 lg:mb-16">
      <h2
        class="reveal font-serif text-4xl sm:text-5xl lg:text-6xl font-bold text-neutral-900 dark:text-white mb-3 sm:mb-4 drop-shadow-sm dark:drop-shadow-[0_0_40px_rgba(255,255,255,0.1)]"
      >
        Destacados
      </h2>
      <p
        class="reveal text-neutral-600 dark:text-neutral-400 text-base sm:text-lg tracking-wide"
        data-delay="150"
      >
        Selecci√≥n Premium
      </p>
    </div>

    <div
      class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 lg:gap-8"
      data-stagger="150"
    >
      {% for producto in productos %} {% if producto.destacado %}
      <div
        class="reveal-scale group product-card h-[420px] sm:h-[480px] lg:h-[500px] bg-white dark:bg-neutral-900/50 rounded-xl sm:rounded-2xl overflow-hidden shadow-xl dark:shadow-none border border-gray-200 dark:border-neutral-800/50 hover:shadow-2xl dark:hover:shadow-[0_0_30px_rgba(59,130,246,0.2)] transition-all duration-500 hover:scale-[1.02]"
      >
        <a
          href="{% url 'productos:detalle' producto.slug %}"
          class="h-full flex flex-col"
        >
          <!-- Imagen Section - 60% -->
          <div class="relative h-[60%] overflow-hidden bg-gray-100 dark:bg-neutral-800">
            {% if producto.imagen %}
            <img
              src="{{ producto.imagen.url }}"
              alt="{{ producto.nombre }}"
              class="w-full h-full object-contain transition-transform duration-500 group-hover:scale-105"
              style="image-rendering: -webkit-optimize-contrast; image-rendering: crisp-edges;"
            />
            {% elif producto.get_main_image %}
            <img
              src="{{ producto.get_main_image.url }}"
              alt="{{ producto.nombre }}"
              class="w-full h-full object-contain transition-transform duration-500 group-hover:scale-105"
              style="image-rendering: -webkit-optimize-contrast; image-rendering: crisp-edges;"
            />
            {% else %}
            <img
              src="{% static 'img/placeholder-product.jpg' %}"
              alt="{{ producto.nombre }}"
              class="w-full h-full object-contain transition-transform duration-500 group-hover:scale-105"
              style="image-rendering: -webkit-optimize-contrast; image-rendering: crisp-edges;"
            />
            {% endif %}
            
            {% if producto.en_oferta or producto.destacado %}
            <div class="absolute top-3 sm:top-4 right-3 sm:right-4 z-10">
              {% if producto.en_oferta %}
              <span class="badge-offer shadow-lg text-xs sm:text-sm">
                {% if producto.porcentaje_descuento %}-{{producto.porcentaje_descuento }}% OFF{% else %}Oferta{% endif %}
              </span>
              {% elif producto.destacado %}
              <span class="badge-offer bg-amber-500 shadow-lg text-xs sm:text-sm"
                >Destacado</span
              >
              {% endif %}
            </div>
            {% endif %}
          </div>

          <!-- Content Section - 40% -->
          <div
            class="h-[40%] p-4 sm:p-6 lg:p-6 space-y-2 sm:space-y-2 lg:space-y-3 bg-white dark:bg-neutral-900 flex flex-col justify-between"
          >
            <div class="flex-grow">
              {% if producto.categoria or producto.marca %}
              <span
                class="inline-block text-blue-500 dark:text-blue-400 text-[10px] sm:text-xs font-medium tracking-wider sm:tracking-widest uppercase mb-1"
              >
                {% if producto.categoria %}{{ producto.categoria.nombre }}{% endif %}{% if producto.subcategoria %} ¬∑ {{ producto.subcategoria.nombre }}{% endif %}{% if producto.marca %} ¬∑ {{ producto.marca.nombre }}{% endif %}
              </span>
              {% endif %}

              <h3
                class="font-serif text-base sm:text-lg lg:text-xl font-bold text-neutral-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-all duration-500 line-clamp-2"
              >
                {{ producto.nombre }}
              </h3>

              {% if producto.descripcion_corta %}
              <p
                class="text-neutral-600 dark:text-neutral-400 text-xs sm:text-sm mt-1 line-clamp-2"
              >
                {{ producto.descripcion_corta }}
              </p>
              {% endif %}
            </div>

            <div class="flex items-baseline gap-1.5 sm:gap-2 mt-auto">
              {% if producto.tiene_descuento %}
              <span class="text-lg sm:text-xl lg:text-2xl font-bold text-neutral-900 dark:text-white"
                >${{ producto.precio_oferta }}</span
              >
              <span
                class="text-xs sm:text-sm text-neutral-500 dark:text-neutral-500 line-through"
                >${{ producto.precio }}</span
              >
              {% else %}
              <span class="text-lg sm:text-xl lg:text-2xl font-bold text-neutral-900 dark:text-white"
                >${{ producto.precio_final }}</span
              >
              {% endif %}
              <span
                class="text-neutral-500 dark:text-neutral-500 text-[10px] sm:text-xs"
                >USD</span
              >
            </div>
          </div>
        </a>
      </div>
      {% endif %} {% empty %}
      <div class="col-span-full text-center py-16">
        <div
          class="bg-white dark:bg-neutral-900/50 border border-gray-200 dark:border-neutral-800 rounded-2xl p-12 max-w-2xl mx-auto shadow-xl dark:shadow-none"
        >
          <svg
            class="w-24 h-24 mx-auto mb-6 text-gray-400 dark:text-gray-600"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"
            ></path>
          </svg>
          <h3 class="text-2xl font-bold text-neutral-900 dark:text-white mb-4">
            No hay productos disponibles
          </h3>
          <p class="text-neutral-600 dark:text-gray-400 mb-8">
            Agrega productos desde el panel de administraci√≥n.
          </p>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
</section>
<section
  class="reveal py-12 sm:py-16 md:py-20 lg:py-24 px-0 bg-gray-100 dark:bg-neutral-950 overflow-hidden"
>
  <div class="max-w-7xl mx-auto">
    {% if productos %}
    <div class="text-center mb-8 sm:mb-10 lg:mb-12 px-4 sm:px-6">
      <h2
        class="font-serif text-4xl sm:text-5xl lg:text-6xl font-bold text-neutral-900 dark:text-white mb-3 sm:mb-4 drop-shadow-sm dark:drop-shadow-[0_0_40px_rgba(255,255,255,0.1)]"
      >
        Otros Productos
      </h2>
    </div>
    {% endif %}

    <!-- Single-Item Carousel Container -->
    <div class="max-w-md mx-auto">
      <!-- Carousel Stage (Single Card Display) -->
      <div class="relative overflow-hidden mb-8">
        <div
          id="product-carousel"
          class="single-card-carousel relative"
          style="min-height: 420px"
        >
        {% for producto in productos %} {% if not producto.destacado %}
        <div
          class="carousel-item absolute inset-0 w-full opacity-0 pointer-events-none"
          data-index="{{ forloop.counter0 }}"
        >
          <a
            href="{% url 'productos:detalle' producto.slug %}"
            class="block bg-white dark:bg-neutral-900 rounded-xl sm:rounded-2xl overflow-hidden shadow-xl dark:shadow-2xl hover:shadow-2xl dark:hover:shadow-[0_0_40px_rgba(59,130,246,0.3)] transition-all duration-500 hover:scale-[1.02] border border-gray-200 dark:border-neutral-800 hover:border-blue-500/30 dark:hover:border-blue-500/30 h-full flex flex-col"
          >
            <div
              class="relative h-[220px] sm:h-[240px] md:h-[220px] lg:h-[240px] overflow-hidden bg-gray-200 dark:bg-neutral-800 flex-shrink-0"
            >
              {% if producto.imagen %}
              <img
                src="{{ producto.imagen.url }}"
                alt="{{ producto.nombre }}"
                class="w-full h-full object-contain bg-gray-100 dark:bg-neutral-800 transform group-hover:scale-102 transition-transform duration-700"
                style="image-rendering: -webkit-optimize-contrast; image-rendering: crisp-edges;"
                loading="lazy"
              />
              {% elif producto.get_main_image %}
              <img
                src="{{ producto.get_main_image.url }}"
                alt="{{ producto.nombre }}"
                class="w-full h-full object-contain bg-gray-100 dark:bg-neutral-800 transform group-hover:scale-102 transition-transform duration-700"
                style="image-rendering: -webkit-optimize-contrast; image-rendering: crisp-edges;"
                loading="lazy"
              />
              {% else %}
              <img
                src="{% static 'img/placeholder-product.jpg' %}"
                alt="{{ producto.nombre }}"
                class="w-full h-full object-contain bg-gray-100 dark:bg-neutral-800 transform group-hover:scale-102 transition-transform duration-700"
                style="image-rendering: -webkit-optimize-contrast; image-rendering: crisp-edges;"
                loading="lazy"
              />
              {% endif %}

              {% if producto.en_oferta or producto.destacado %}
              <div class="absolute top-3 sm:top-4 right-3 sm:right-4 z-10">
                {% if producto.en_oferta %}
                <span class="badge-offer shadow-lg text-xs sm:text-sm">
                  {% if producto.porcentaje_descuento %}-{{ producto.porcentaje_descuento }}%{% else %}Oferta{% endif %}
                </span>
                {% elif producto.destacado %}
                <span
                  class="badge-offer bg-blue-600 shadow-lg text-xs sm:text-sm"
                  >Premium</span
                >
                {% endif %}
              </div>
              {% endif %}
            </div>

            <div
              class="p-3 sm:p-4 lg:p-4 space-y-1.5 sm:space-y-2 bg-white dark:bg-neutral-900 flex-grow flex flex-col"
            >
              {% if producto.marca or producto.categoria %}
              <span
                class="text-blue-500 dark:text-blue-400 text-[10px] sm:text-xs uppercase tracking-wider font-semibold"
              >
                {{ producto.marca.nombre|default:producto.categoria.nombre }}
              </span>
              {% endif %}
              
              <h3
                class="font-serif text-sm sm:text-base md:text-lg font-bold text-neutral-900 dark:text-white group-hover:text-blue-500 dark:group-hover:text-blue-400 transition-colors duration-300 line-clamp-2 leading-tight"
              >
                {{ producto.nombre }}
              </h3>

              <div class="flex items-baseline gap-1.5">
                {% if producto.tiene_descuento %}
                <span
                  class="text-base sm:text-lg font-bold text-neutral-900 dark:text-white"
                >
                  ${{ producto.precio_oferta }}
                </span>
                <span
                  class="text-xs text-neutral-500 dark:text-neutral-500 line-through"
                >
                  ${{ producto.precio }}
                </span>
                {% else %}
                <span
                  class="text-base sm:text-lg font-bold text-neutral-900 dark:text-white"
                >
                  ${{ producto.precio_final }}
                </span>
                {% endif %}
                <span class="text-neutral-500 dark:text-neutral-500 text-[10px]"
                  >USD</span
                >
              </div>

              {% comment %}
              <button
                class="btn-crimson w-full shadow-lg transform group-hover:shadow-xl transition-all duration-300 text-sm py-2.5 mt-auto"
              >
                Ver Detalles
              </button>
              {% endcomment %} {% if producto.stock %}
              <div class="flex items-center gap-1.5 text-xs">
                <div
                  class="w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"
                ></div>
                <span class="text-neutral-600 dark:text-neutral-400">
                  {{ producto.stock }} disponibles
                </span>
              </div>
              {% else %}
              <div class="flex items-center gap-1.5 text-xs">
                <div class="w-1.5 h-1.5 bg-red-500 rounded-full"></div>
                <span class="text-neutral-500 dark:text-neutral-500">
                  Agotado
                </span>
              </div>
              {% endif %}
            </div>
          </a>
        </div>
        {% endif %} {% endfor %} {% if not productos %}
        <div
          class="carousel-item absolute inset-0 w-full opacity-100"
          data-index="0"
        >
          <div
            class="bg-white dark:bg-neutral-900 rounded-xl sm:rounded-2xl p-8 sm:p-12 text-center border border-gray-200 dark:border-neutral-800 h-full flex flex-col items-center justify-center"
          >
            <svg
              class="w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-3 sm:mb-4 text-gray-400 dark:text-neutral-700"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"
              ></path>
            </svg>
            <h3
              class="text-lg sm:text-xl font-bold text-neutral-900 dark:text-white mb-2"
            >
              No hay productos
            </h3>
            <p
              class="text-neutral-600 dark:text-neutral-500 text-sm sm:text-base"
            >
              Agrega productos desde el panel de administraci√≥n
            </p>
          </div>
        </div>
        {% endif %}
      </div>

      <!-- External Controls - Below Carousel -->
      <div class="gallery-controls">
        <!-- Bot√≥n Anterior -->
        <button
          id="carousel-prev"
          type="button"
          class="gallery-control-btn gallery-nav-btn prev"
          aria-label="Producto anterior"
        >
          <svg
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path d="M15 18l-6-6 6-6" />
          </svg>
        </button>

        <!-- Separador -->
        <div class="gallery-control-divider"></div>

        <!-- Bot√≥n Play/Pause -->
        <button
          id="carousel-playpause"
          type="button"
          class="gallery-control-btn gallery-playpause-btn"
          aria-label="Pausar carrusel"
        >
          <!-- √çcono Play -->
          <svg class="icon-play" viewBox="0 0 24 24" fill="currentColor">
            <path
              d="M8 5.14v14.72a.5.5 0 00.76.43l11.2-7.36a.5.5 0 000-.86L8.76 4.71a.5.5 0 00-.76.43z"
            />
          </svg>
          <!-- √çcono Pause -->
          <svg class="icon-pause" viewBox="0 0 24 24" fill="currentColor">
            <rect x="6" y="4" width="4" height="16" rx="1" />
            <rect x="14" y="4" width="4" height="16" rx="1" />
          </svg>
        </button>

        <!-- Separador -->
        <div class="gallery-control-divider"></div>

        <!-- Bot√≥n Siguiente -->
        <button
          id="carousel-next"
          type="button"
          class="gallery-control-btn gallery-nav-btn next"
          aria-label="Producto siguiente"
        >
          <svg
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path d="M9 18l6-6-6-6" />
          </svg>
        </button>
      </div>
    </div>
  </div>
  {% endblock %} {% block extra_js %}
  <style>
    /* ======================================== */
    /* SINGLE-ITEM CAROUSEL WITH CROSSFADE     */
    /* Professional Slide + Fade Transitions   */
    /* ======================================== */

    /* Container: Single card visible at a time */
    .premium-carousel {
      position: relative;
      overflow: hidden;
      min-height: 420px;
    }

    /* Individual carousel items */
    .carousel-item {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      width: 100%;
      
      /* Default: hidden and not interactive */
      opacity: 0;
      pointer-events: none;
      
      /* Hardware acceleration */
      will-change: transform, opacity;
      backface-visibility: hidden;
      -webkit-backface-visibility: hidden;
      
      /* Premium transition with professional easing */
      transition: transform 0.5s cubic-bezier(0.4, 0.0, 0.2, 1),
                  opacity 0.5s cubic-bezier(0.4, 0.0, 0.2, 1);
    }

    /* Active card: visible and interactive */
    .carousel-item.is-active {
      opacity: 1;
      transform: translateX(0);
      pointer-events: auto;
      z-index: 2;
    }

    /* Entering card: slide in from right */
    .carousel-item.is-entering {
      opacity: 0;
      transform: translateX(20px);
      z-index: 1;
    }

    /* Exiting card: slide out to left */
    .carousel-item.is-exiting {
      opacity: 0;
      transform: translateX(-20px);
      pointer-events: none;
      z-index: 0;
    }

    /* Active card enhancements */
    .carousel-item.is-active a {
      box-shadow: 0 30px 60px -15px rgba(0, 0, 0, 0.25),
        0 0 0 1px rgba(59, 130, 246, 0.15), 
        0 0 40px rgba(59, 130, 246, 0.1);
      border-color: rgba(59, 130, 246, 0.3) !important;
    }

    .dark .carousel-item.is-active a {
      box-shadow: 0 30px 60px -15px rgba(0, 0, 0, 0.5),
        0 0 0 1px rgba(59, 130, 246, 0.25), 0 0 50px rgba(59, 130, 246, 0.15);
    }

    /* Active card image effects */
    .carousel-item.is-active img {
      transform: scale(1);
      filter: contrast(1.02) saturate(1.05);
      transition: all 0.8s cubic-bezier(0.25, 1, 0.5, 1);
    }

    /* Inactive card image */
    .carousel-item:not(.is-active) img {
      transform: scale(1);
      filter: contrast(1) saturate(1);
      transition: all 0.6s cubic-bezier(0.25, 1, 0.5, 1);
    }

    /* Hover effects only on active card */
    .carousel-item.is-active:hover {
      transform: scale(1.02) translateZ(10px);
    }

    .carousel-item.is-active:hover a {
      box-shadow: 0 35px 70px -15px rgba(0, 0, 0, 0.3),
        0 0 0 1px rgba(59, 130, 246, 0.25), 0 0 50px rgba(59, 130, 246, 0.15);
    }

    .carousel-item.is-active:hover img {
      transform: scale(1.02);
      filter: contrast(1.05) saturate(1.08) brightness(1.01);
    }

    /* Luxury glow animation for active card */
    @keyframes activeGlow {
      0%,
      100% {
        box-shadow: 0 30px 60px -15px rgba(0, 0, 0, 0.25),
          0 0 0 1px rgba(59, 130, 246, 0.15), 0 0 30px rgba(59, 130, 246, 0.08);
      }
      50% {
        box-shadow: 0 35px 70px -15px rgba(0, 0, 0, 0.3),
          0 0 0 1px rgba(59, 130, 246, 0.2), 0 0 50px rgba(59, 130, 246, 0.15);
      }
    }

    .carousel-item.is-active.is-playing a {
      animation: activeGlow 3s ease-in-out infinite;
    }

    .dark .carousel-item.is-active.is-playing a {
      animation: activeGlowDark 3s ease-in-out infinite;
    }

    @keyframes activeGlowDark {
      0%,
      100% {
        box-shadow: 0 30px 60px -15px rgba(0, 0, 0, 0.5),
          0 0 0 1px rgba(59, 130, 246, 0.2), 0 0 40px rgba(59, 130, 246, 0.12);
      }
      50% {
        box-shadow: 0 35px 70px -15px rgba(0, 0, 0, 0.6),
          0 0 0 1px rgba(59, 130, 246, 0.35), 0 0 60px rgba(59, 130, 246, 0.2);
      }
    }

    /* Snap scrolling precision */
    .carousel-item {
      scroll-snap-align: center;
      scroll-snap-stop: always;
    }

    /* Smooth scroll indicator line */
    .carousel-progress-track {
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 120px;
      height: 3px;
      background: rgba(0, 0, 0, 0.1);
      border-radius: 3px;
      overflow: hidden;
    }

    .dark .carousel-progress-track {
      background: rgba(255, 255, 255, 0.1);
    }

    .carousel-progress-bar {
      height: 100%;
      background: linear-gradient(90deg, #3b82f6, #60a5fa);
      border-radius: 3px;
      transition: width 0.3s cubic-bezier(0.25, 1, 0.5, 1);
    }

    /* Mobile optimizations */
    @media (max-width: 640px) {
      .carousel-item {
        opacity: 0.6;
        transform: scale(0.9) translateZ(-40px);
      }

      .carousel-item.is-active {
        transform: scale(1.02) translateZ(0);
      }

      .carousel-item.is-adjacent {
        opacity: 0.65;
        transform: scale(0.94) translateZ(-25px);
      }
    }

    /* Reduced motion preference */
    @media (prefers-reduced-motion: reduce) {
      .carousel-item {
        transition: opacity 0.3s ease !important;
        transform: none !important;
        filter: none !important;
      }

      .carousel-item.is-active {
        opacity: 1;
      }

      .carousel-item:not(.is-active) {
        opacity: 0.7;
      }

      .carousel-item.is-active.is-playing a {
        animation: none !important;
      }
    }
  </style>
  
  <!-- External JavaScript for Single-Item Carousel -->
  <script src="{% static 'js/single-card-carousel.js' %}"></script>
  
  <script>
    // ========================================
    // VIDEO DEBUG
    // ========================================
    (function () {
      const video = document.getElementById("heroVideo");

      if (video) {
        console.log("üé¨ VIDEO DEBUG - Informaci√≥n del video:");
        console.log("‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ");

        // Detectar errores de carga
        video.addEventListener(
          "error",
          function (e) {
            console.error("‚ùå ERROR AL CARGAR EL VIDEO");
            console.error(
              "C√≥digo de error:",
              video.error ? video.error.code : "Desconocido"
            );
            console.error(
              "Mensaje:",
              video.error ? video.error.message : "Sin mensaje"
            );

            // Intentar obtener la fuente que fall√≥
            const sources = video.querySelectorAll("source");
            sources.forEach((source, index) => {
              console.error(`Fuente ${index + 1}:`, source.src);
              console.error(`Tipo:`, source.type);
            });
          },
          true
        );

        // Cuando el video se carga correctamente
        video.addEventListener("loadeddata", function () {
          console.log("‚úÖ VIDEO CARGADO EXITOSAMENTE");
          console.log("Duraci√≥n:", video.duration, "segundos");
          console.log("Dimensiones:", video.videoWidth, "x", video.videoHeight);
        });

        // Cuando el video empieza a reproducirse
        video.addEventListener("playing", function () {
          console.log("‚ñ∂Ô∏è VIDEO REPRODUCI√âNDOSE");
        });

        // Mostrar todas las fuentes de video
        const sources = video.querySelectorAll("source");
        console.log("üìÅ Fuentes de video configuradas:");
        sources.forEach((source, index) => {
          console.log(`  ${index + 1}. ${source.type}:`);
          console.log(`     ${source.src}`);

          // Verificar si la URL es accesible
          fetch(source.src, { method: "HEAD" })
            .then((response) => {
              if (response.ok) {
                console.log(`     ‚úÖ Archivo accesible (${response.status})`);
              } else {
                console.error(
                  `     ‚ùå Error ${response.status}: Archivo no encontrado`
                );
              }
            })
            .catch((err) => {
              console.error(`     ‚ùå Error de red:`, err.message);
            });
        });

        // Mostrar poster
        console.log("üñºÔ∏è Poster:", video.poster);

        // Verificar estado de reproducci√≥n
        setTimeout(() => {
          if (video.paused) {
            console.warn("‚ö†Ô∏è El video est√° PAUSADO");
            console.log("Intentando reproducir manualmente...");

            video
              .play()
              .then(() => console.log("‚úÖ Reproducci√≥n manual exitosa"))
              .catch((err) => console.error("‚ùå Error al reproducir:", err));
          } else {
            console.log("‚úÖ El video se est√° reproduciendo autom√°ticamente");
          }
        }, 1000);

        console.log("‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ");
      } else {
        console.error(
          '‚ùå No se encontr√≥ el elemento <video> con id="heroVideo"'
        );
      }
    })();
  </script>
  {% endblock %}
</section>
